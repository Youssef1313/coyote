<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="722.617" height="431.288" stroke-linecap="round" font-family="Segoe UI" font-size="12"><rect width="722.617" height="431.288" fill="#FFF"/><g transform="translate(20,20)"><g id="Microsoft.Coyote.Samples.CloudMessaging.Server"><rect width="682.617" height="391.288" fill="#EEE" stroke="#A5A6A9" stroke-width="1" rx="5" ry="5"/><text x="209" y="17.95" fill="#000">Microsoft.Coyote.Samples.CloudMessaging.Server</text><rect width="672.617" height="358.328" x="5" y="27.96" fill="#FFF" stroke="#A5A6A9" stroke-width="1"/><g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Candidate-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Follower"><path fill="none" stroke="#A0A0A0" stroke-width="1" d="M 104.640969273261,131.5875 L 128.695,176.5375 C 149.361666666667,215.1575 172.861666666667,240.460833333334 199.195,252.4475 L 201.988118538493,253.718899273978"/><path fill="#A0A0A0" stroke="#A0A0A0" stroke-linejoin="round" stroke-width="1" d="M 210.179427141268,257.4475 L 202.735129016417,249.664028703186 C 202.540503831237,252.505372073566 201.435733245749,254.932426474389 199.420817259952,256.945191905653 z"/><text x="119.575" y="203.478" fill="#A0A0A0">demoted</text></g><g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Candidate-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Leader"><path fill="none" stroke="#A0A0A0" stroke-width="1" d="M 115.446740251859,131.5875 L 127.741666666667,140.5775 C 147.772777777778,155.224166666667 171.272777777778,168.540833333334 198.241666666667,180.5275 L 203.476044266512,182.853985891032"/><path fill="#A0A0A0" stroke="#A0A0A0" stroke-linejoin="round" stroke-width="1" d="M 211.700292312518,186.509357838969 L 204.186848682705,178.792612098592 C 204.017580851391,181.635578773105 202.934507681632,184.072393008959 200.937629173428,186.103054806153 z"/><text x="157.788" y="167.518" fill="#A0A0A0">majority of votes</text></g><g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Follower-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Candidate"><path fill="none" stroke="#A0A0A0" stroke-width="1" d="M 206.266666666667,263.402663453816 L 155.695,252.4475 C 100.361666666667,240.460833333334 72.6950000000001,222.480833333334 72.6950000000001,198.507500000001 C 72.6950000000001,174.534166666667 76.8616666666668,155.224166666667 85.1950000000001,140.5775 L 85.8592575817727,139.410000874276"/><path fill="#A0A0A0" stroke="#A0A0A0" stroke-linejoin="round" stroke-width="1" d="M 90.3099294492491,131.5875 L 81.8880714301525,138.30109125254 C 84.7003685633614,138.750642079095 87.0181466001841,140.069359669458 88.8414055406204,142.25724402363 z"/><text x="31.222" y="203.478" fill="#A0A0A0">timeout</text></g><g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Init-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Follower"><path fill="none" stroke="#A0A0A0" stroke-width="1" d="M 516.695,205.370095419848 L 476.195,216.4875 C 432.528333333333,228.474166666667 382.028333333333,240.460833333334 324.695,252.4475 L 279.932859548873,261.805910294317"/><path fill="#A0A0A0" stroke="#A0A0A0" stroke-linejoin="round" stroke-width="1" d="M 271.123333333334,263.647715891473 L 281.730276060447,265.516610212651 C 280.205719637341,263.111025289212 279.659999460406,260.500795299423 280.093115529642,257.685920243282 z"/><text x="277.552" y="239.438" fill="#A0A0A0">NotifyJoinedServiceEvent</text></g><g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Leader-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Follower"><path fill="none" stroke="#A0A0A0" stroke-width="1" d="M 238.695,211.4875 L 238.695,248.4475"/><path fill="#A0A0A0" stroke="#A0A0A0" stroke-linejoin="round" stroke-width="1" d="M 238.695,257.4475 L 242.695,247.4475 C 240.028333333333,248.4475 237.361666666667,248.4475 234.695,247.4475 z"/><text x="190.575" y="239.438" fill="#A0A0A0">demoted</text></g><g id="944b151a-5736-40d5-8851-dff5e6bb6c201-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Init"><path fill="none" stroke="#A0A0A0" stroke-width="1" d="M 541.695,139.5675 L 541.695,176.5275"/><path fill="#A0A0A0" stroke="#A0A0A0" stroke-linejoin="round" stroke-width="1" d="M 541.695,185.5275 L 545.695,175.5275 C 543.028333333333,176.5275 540.361666666667,176.5275 537.695,175.5275 z"/></g><g id="SendsVoteRequestEvents-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Candidate"><path fill="none" stroke="#A0A0A0" stroke-width="1" d="M 97.6950000000001,65.9599999999999 L 97.6950000000001,96.6275000000001"/><path fill="#A0A0A0" stroke="#A0A0A0" stroke-linejoin="round" stroke-width="1" d="M 97.6950000000001,105.6275 L 101.695,95.6275000000001 C 99.0283333333334,96.6275000000001 96.3616666666668,96.6275000000001 93.6950000000001,95.6275000000001 z"/></g><g id="HandlesClientRequestEvent-&gt;Microsoft.Coyote.Samples.CloudMessaging.Server.Leader"><path fill="none" stroke="#A0A0A0" stroke-width="1" d="M 277.695,139.5675 L 277.695,140.5775 C 277.695,154.772736141042 271.589503256527,167.71869371765 259.378509769582,179.415372729824"/><path fill="#A0A0A0" stroke="#A0A0A0" stroke-linejoin="round" stroke-width="1" d="M 252.772308120134,185.5275 L 262.829033184043,181.672337099559 C 260.284010105904,180.394069270483 258.473009433259,178.436676189165 257.396031166109,175.800157855606 z"/></g><g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Candidate"><rect width="73.817" height="25.96" x="60.787" y="105.628" fill="#FFF" stroke="#A5A6A9" stroke-width="1" rx="3" ry="3"/><text x="70.787" y="123.578" fill="#3D3D3D">Candidate</text></g><g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Follower"><rect width="64.857" height="25.96" x="206.267" y="257.448" fill="#FFF" stroke="#A5A6A9" stroke-width="1" rx="3" ry="3"/><text x="216.267" y="275.398" fill="#3D3D3D">Follower</text></g><g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Init"><rect width="50" height="25.96" x="516.695" y="185.528" fill="#FFF" stroke="#A5A6A9" stroke-width="1" rx="3" ry="3"/><text x="532.695" y="203.478" fill="#3D3D3D">Init</text></g><g id="Microsoft.Coyote.Samples.CloudMessaging.Server.Leader"><rect width="55.55" height="25.96" x="210.92" y="185.528" fill="#FFF" stroke="#A5A6A9" stroke-width="1" rx="3" ry="3"/><text x="220.92" y="203.478" fill="#3D3D3D">Leader</text></g><g id="944b151a-5736-40d5-8851-dff5e6bb6c201"><rect width="241.843" height="41.92" x="420.773" y="97.648" fill="#FFFACD" stroke="#E5C365" stroke-width="1" rx="2" ry="2"/><g><text x="430.773" y="115.598" fill="#3D3D3D">Start state where all events are deferred</text><text x="430.773" y="131.558" fill="#3D3D3D">until we get the NotifyJoinedServiceEvent.</text></g></g><g id="SendsVoteRequestEvents"><rect width="155.39" height="25.96" x="20" y="40" fill="#FFFACD" stroke="#E5C365" stroke-width="1" rx="2" ry="2"/><text x="30" y="57.95" fill="#3D3D3D">Sends VoteRequestEvents</text></g><g id="SendsVoteResponseEvents"><rect width="240.59" height="41.92" x="291.42" y="313.408" fill="#FFFACD" stroke="#E5C365" stroke-width="1" rx="2" ry="2"/><g><text x="301.42" y="331.358" fill="#3D3D3D">Any state handles VoteRequestEvents and</text><text x="301.42" y="347.318" fill="#3D3D3D">sends back VoteResponseEvents.</text></g></g><g id="HandlesClientRequestEvent"><rect width="224.627" height="41.92" x="165.382" y="97.648" fill="#FFFACD" stroke="#E5C365" stroke-width="1" rx="2" ry="2"/><g><text x="175.382" y="115.598" fill="#3D3D3D">Handles ClientRequestEvent and sends</text><text x="175.382" y="131.558" fill="#3D3D3D">AppendLogEntriesRequestEvent</text></g></g><g id="AnyStateExceptInitCanHandleAppendLogEntriesResponseEvent"><rect width="241.42" height="57.88" x="20" y="313.408" fill="#FFFACD" stroke="#E5C365" stroke-width="1" rx="2" ry="2"/><g><text x="30" y="331.358" fill="#3D3D3D">Any state except Init can handle</text><text x="30" y="347.318" fill="#3D3D3D">AppendLogEntriesRequestEvents, sending</text><text x="30" y="363.278" fill="#3D3D3D">back AppendLogEntriesResponseEvents</text></g></g></g></g></svg>